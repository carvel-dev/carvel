{{ $subproject := (index (split .RelPermalink "/") 1) }}
{{ $inSubproject := (in .Site.Params.products $subproject) }}

<header {{ if $inSubproject }}class="in-subproject"{{ end }}>
	<div class="wrapper">
		<a href="{{ .Site.BaseURL }}"><img class="image" src="/img/logo.svg" alt="Carvel Logo" /></a>
		<ul class="desktop-links">
			<li><a href="/" {{ if (eq .RelPermalink "/") }}class="active"{{ end }}>All Tools</a></li>
			<li><a href="/community/" {{ if (eq .RelPermalink "/community/") }}class="active"{{ end }}>Community</a></li>
			<li><a href="/blog/" {{ if or (eq .Page.Section "posts") (eq .Page.Section "tags") }}class="active"{{ end }}>Blog</a></li>
			<li><a href="{{ .Site.Params.slack }}"><img src="/img/slack.png" /><span class="desktop">#carvel in Kubernetes Slack</span><span class="tablet">Slack</span></a></li>
		</ul>
		<button type="button" class="mobile" onclick="mobileNavToggle()">
			<img class="collapsed-icon" src="/img/hamburger.svg" alt="Mobile nav icon">
			<img class="expanded-icon" src="/img/close.svg" alt="Mobile nav icon">
		</button>
		<div id="mobile-menu" class="mobile-menu mobile">
			<ul class="header-links">
				<li><a href="/" {{ if (eq .RelPermalink "/") }}class="active"{{ end }}>All Tools</a></li>
				<li><a href="/community/" {{ if (eq .RelPermalink "/community/") }}class="active"{{ end }}>Community</a></li>
				<li><a href="/blog/" {{ if or (eq .Page.Section "posts") (eq .Page.Section "tags") }}class="active"{{ end }}>Blog</a></li>
			</ul>
			<div class="social">
				<a href="{{ .Site.Params.gh_repo }}"><img src="/img/github.svg" />GitHub</a>
				<a href="{{ .Site.Params.slack }}"><img src="/img/slack.png" />#carvel in Kubernetes Slack</a>
			</div>
		</div>
	</div>
</header>

{{ if $inSubproject }}
{{ $info := (index .Site.Params $subproject) }}
<header class="subproject-specific">
	<div class="wrapper">
		<a href="{{ $info.root_link }}" class="text-logo">{{ $subproject }}</a>
		<ul class="desktop-links">
			<li><a href="{{ $info.root_link }}" {{ if (eq .RelPermalink $info.root_link) }}class="active"{{ end }}>{{ $subproject }} Home</a></li>
			<li><a href="{{ $info.latest_docs_link }}" {{ if (eq  .RelPermalink $info.latest_docs_link) }}class="active"{{ end }}>Documentation</a></li>
			<li><a href="{{ $info.github_url }}"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
		<ul class="mobile-links mobile">
			<li><a href="{{ $info.latest_docs_link }}" {{ if (eq  .RelPermalink $info.latest_docs_link) }}class="active"{{ end }}>Documentation</a></li>
			<li><a href="{{ $info.github_url }}"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
	</div>
</header>
{{ end }}
