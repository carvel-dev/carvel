<!DOCTYPE html>
<!-- docs/baseof.html -->
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="icon" type="image/png" href="/img/favicon.png">
    
    
    <link rel="stylesheet" href="/css/style.css" integrity="" media="screen">
    <script src="/js/main.js" type="text/javascript"></script>
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /> 
  
    
      
      <meta name="robots" content="noindex">
    
    <title>Carvel - kapp-controller - App Config</title>
  </head>

  <body id="docs">
    

<header class="in-subproject">
	<div class="wrapper">
		<a href="/"><img class="image" src="/img/logo.svg" alt="Carvel Logo" /></a>
		<ul class="desktop-links">
			<li><a href="/" >Home</a></li>
			<li class="subprojects-in-primary-nav">
				<a href="/" onclick="return false;">Projects</a>
				<ul>
					
					
					<li><a href="/ytt/" >ytt</a></li>
					
					
					<li><a href="/kbld/" >kbld</a></li>
					
					
					<li><a href="/kapp/" >kapp</a></li>
					
					
					<li><a href="/imgpkg/" >imgpkg</a></li>
					
					
					<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller" >kapp-controller</a></li>
					
					
					<li><a href="/vendir/" >vendir</a></li>
					
				</ul>
			</li>
			<li><a href="/community/" >Community</a></li>
			<li><a href="/blog/" >Blog</a></li>
			<li><a href="https://kubernetes.slack.com/archives/CH8KCCKA5"><img src="/img/slack.png" />#carvel in Kubernetes Slack</a></li>
		</ul>
		<button type="button" class="mobile" onclick="mobileNavToggle()">
			<img class="collapsed-icon" src="/img/hamburger.svg" alt="Mobile nav icon">
			<img class="expanded-icon" src="/img/close.svg" alt="Mobile nav icon">
		</button>
		<div id="mobile-menu" class="mobile-menu mobile">
			<ul class="header-links">
				<li><a href="/" >Home</a></li>
				<li>
					<a href="/">Projects</a>
					<ul>
						
						
						<li><a href="/ytt/" >ytt</a></li>
						
						
						<li><a href="/kbld/" >kbld</a></li>
						
						
						<li><a href="/kapp/" >kapp</a></li>
						
						
						<li><a href="/imgpkg/" >imgpkg</a></li>
						
						
						<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller" >kapp-controller</a></li>
						
						
						<li><a href="/vendir/" >vendir</a></li>
						
					</ul>
				</li>
				<li><a href="/community/" >Community</a></li>
				<li><a href="/blog/" >Blog</a></li>
			</ul>
			<div class="social">
				<a href="https://github.com/vmware-tanzu/carvel.dev"><img src="/img/github.svg" />GitHub</a>
				<a href="https://kubernetes.slack.com/archives/CH8KCCKA5"><img src="/img/slack.png" />#carvel in Kubernetes Slack</a>
			</div>
		</div>
	</div>
</header>



<header class="subproject-specific">
	<div class="wrapper">
		<a href="https://github.com/vmware-tanzu/carvel-kapp-controller" class="text-logo">kapp-controller</a>
		<ul class="desktop-links">
			<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller" >kapp-controller Overview</a></li>
			<li><a href="/kapp-controller/docs/latest/" >Documentation</a></li>
			<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
		<ul class="mobile-links mobile">
			<li><a href="/kapp-controller/docs/latest/" >Docs</a></li>
			<li><a href="https://github.com/vmware-tanzu/carvel-kapp-controller"><img src="/img/github.svg" />GitHub</a></li>
		</ul>
	</div>
</header>


    <main>
      <div class="wrapper dedicated-page docs clearfix">
        <div class="side-nav">
          
<div class="dropdown">
    
        <span>latest</span>
    
</div>

          
    
    <form class="d-flex align-items-center">
        <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
        <input type="search" class="form-control docsearch-input" id="search-input" placeholder="Search..."
                aria-label="Search for..." autocomplete="off" spellcheck="false" role="combobox"
                aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0"
                dir="auto" style="position: relative; vertical-align: top;">
        </span>
    </form>

          <nav class="navigation">
  
  
  
  
    
    
    
    

    
      <h3>Introduction</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/" >About kapp-controller</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/install/" >Install</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/walkthrough/" >Walkthrough</a>
            
          </li>
        
      </ul>
    
      <h3>Reference</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/app-spec/" >App CR Spec</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/config/" class="active">Configuration</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/controller-config/" >Controller Configuration</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/startup/" >Controller Startup</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/security-model/" >Security Model</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/dangerous-flags/" >Dangerous Flags</a>
            
          </li>
        
      </ul>
    
      <h3>Template steps</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/sops/" >Mozilla&#39;s sops</a>
            
          </li>
        
      </ul>
    
      <h3>Packaging (alpha)</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/packaging/" >Terminology &amp; APIs</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/install-alpha/" >Install</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/package-authoring/" >Authoring packages</a>
            
          </li>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/package-consumption/" >Consuming packages</a>
            
          </li>
        
      </ul>
    
      <h3>FAQ</h3>
      <ul>
        
          <li>
            
              
              <a href="/kapp-controller/docs/latest/security/" >Security</a>
            
          </li>
        
      </ul>
    
  
</nav>

        </div>
        <div class="docs-content text-content">
          

	


          <div class="documentation-container">
            <h1>App Config</h1>
            
                <aside>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#example">Example</a></li>
    <li><a href="#specfetch">spec.fetch</a>
      <ul>
        <li><a href="#image-authentication"><code>image</code> authentication</a></li>
        <li><a href="#imgpkgbundle-authentication"><code>imgpkgBundle</code> authentication</a></li>
        <li><a href="#git-authentication"><code>git</code> authentication</a></li>
        <li><a href="#http-authentication"><code>http</code> authentication</a></li>
        <li><a href="#helmchart-authentication"><code>helmChart</code> authentication</a></li>
      </ul>
    </li>
    <li><a href="#spectemplate">spec.template</a></li>
    <li><a href="#specdeploy">spec.deploy</a></li>
  </ul>
</nav>
                </aside>
            

            <h2 id="example">Example <a href="#example" class="section-link">¶</a></h2><p>See <a href="/kapp-controller/docs/latest/app-spec/">App Spec</a> for details.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">apiVersion</span>:<span style="color:#bbb"> </span>kappctrl.k14s.io/v1alpha1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">kind</span>:<span style="color:#bbb"> </span>App<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span>simple-app<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">serviceAccountName</span>:<span style="color:#bbb"> </span>default<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">fetch</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">git</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">url</span>:<span style="color:#bbb"> </span>https://github.com/k14s/k8s-simple-app-example<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">ref</span>:<span style="color:#bbb"> </span>origin/develop<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">subPath</span>:<span style="color:#bbb"> </span>config-step-2-template<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">template</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">ytt</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">deploy</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">kapp</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span></code></pre></div><h2 id="specfetch">spec.fetch <a href="#specfetch" class="section-link">¶</a></h2><p>Fetches set of files from various sources. Multiple sources can be used (for example, <code>helmChart</code> and <code>inline</code>).</p>
<ul>
<li><code>inline</code>: specify one or more files within resource</li>
<li><code>imgpkgBundle</code>: download <a href="https://carvel.dev/imgpkg/docs/latest/resources/#bundle" target="_blank">imgpkg bundle</a> from registry (available in v0.17.0+)</li>
<li><code>image</code>: download Docker image from registry</li>
<li><code>http</code>: download file at URL</li>
<li><code>git</code>: clone Git repository</li>
<li><code>helmChart</code>: fetch Helm chart from Helm repository</li>
</ul>
<p>Pull helm chart via <code>helm fetch</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">fetch</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">helmChart</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span>stable/concourse<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># ...</span><span style="color:#bbb">
</span></code></pre></div><p>Pull helm chart via git</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">fetch</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">git</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">url</span>:<span style="color:#bbb"> </span>https://github.com/bitnami/charts<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">ref</span>:<span style="color:#bbb"> </span>origin/master<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">subPath</span>:<span style="color:#bbb"> </span>bitnami/nginx<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># ...</span><span style="color:#bbb">
</span></code></pre></div><p>Note, following sections describes contents of Secret resources referenced by various fetch strategies. kapp-controller does not check for <code>type</code> value of Secret resource.</p>
<h3 id="image-authentication"><code>image</code> authentication <a href="#image-authentication" class="section-link">¶</a></h3><p>Allowed secret keys:</p>
<ul>
<li><code>username</code> and <code>password</code></li>
<li><code>token</code>: Alternative to username/password authentication</li>
</ul>
<h3 id="imgpkgbundle-authentication"><code>imgpkgBundle</code> authentication <a href="#imgpkgbundle-authentication" class="section-link">¶</a></h3><p>Allowed secret keys:</p>
<ul>
<li><code>username</code> and <code>password</code></li>
<li><code>token</code>: Alternative to username/password authentication</li>
</ul>
<h3 id="git-authentication"><code>git</code> authentication <a href="#git-authentication" class="section-link">¶</a></h3><p>Allowed secret keys:</p>
<ul>
<li><code>ssh-privatekey</code>: PEM-encoded key that will be provided to SSH</li>
<li><code>ssh-knownhosts</code>: Optional, set of known hosts allowed to connect (if not specified, all hosts are allowed)</li>
<li><code>username</code> and <code>password</code>: Alternative to private key authentication</li>
</ul>
<h3 id="http-authentication"><code>http</code> authentication <a href="#http-authentication" class="section-link">¶</a></h3><p>Allowed secret keys:</p>
<ul>
<li><code>username</code> and <code>password</code></li>
</ul>
<h3 id="helmchart-authentication"><code>helmChart</code> authentication <a href="#helmchart-authentication" class="section-link">¶</a></h3><p>Allowed secret keys:</p>
<ul>
<li><code>username</code> and <code>password</code></li>
</ul>
<hr>
<h2 id="spectemplate">spec.template <a href="#spectemplate" class="section-link">¶</a></h2><p>Transform set of files.</p>
<ul>
<li><code>helmTemplate</code>: uses <code>helm template</code> command to render chart</li>
<li><code>ytt</code>: uses <a href="/ytt/">ytt</a> to rended templates</li>
<li><code>kbld</code>: uses <a href="/kbld/">kbld</a> to resolve image URLs to include digests</li>
<li><code>kustomize</code>: (not implemented yet) uses kustomize to render configuration</li>
<li><code>jsonnnet</code>: (not implemented yet) renders jsonnet files</li>
<li><code>sops</code>: uses <a href="https://github.com/mozilla/sops" target="_blank">sops</a> to decrypt secrets. <a href="/kapp-controller/docs/latest/sops/">More details</a>. Available in v0.11.0+.</li>
</ul>
<p>Template source via <code>helm template</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># ...</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">template</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">helmTemplate</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">valuesFrom</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000080">secretRef</span>:<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span>redis-values<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># ...</span><span style="color:#bbb">
</span></code></pre></div><p>Template source via <code>helm template</code> and then modify via <code>ytt</code> overlay</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># ...</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">template</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">helmTemplate</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">ytt</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">ignoreUnknownComments</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">inline</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000080">paths</span>:<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#000080">remove-lb.yml</span>:<span style="color:#bbb"> </span>|<span style="color:#d14">
</span><span style="color:#d14">            #@ load(&#34;@ytt:overlay&#34;, &#34;overlay&#34;)
</span><span style="color:#d14">            #@overlay/match by=overlay.subset({&#34;kind&#34;:&#34;Service&#34;,&#34;metadata&#34;:{&#34;name&#34;:&#34;nginx&#34;}})
</span><span style="color:#d14">            ---
</span><span style="color:#d14">            spec:
</span><span style="color:#d14">              type: ClusterIP
</span><span style="color:#d14">              #@overlay/remove
</span><span style="color:#d14">              externalTrafficPolicy:</span><span style="color:#bbb">            
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># ...</span><span style="color:#bbb">
</span></code></pre></div><hr>
<h2 id="specdeploy">spec.deploy <a href="#specdeploy" class="section-link">¶</a></h2><p>Deploys resources.</p>
<ul>
<li><code>kapp</code>: uses <a href="/kapp/">kapp</a> to deploy resources</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># ...</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">deploy</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000080">kapp</span>:<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span></code></pre></div>
          </div>
        </div>
      </div>
    </main>
    <footer>
	<div class="wrapper footer-links">
		<div class="clearfix">
			<ul class="left-links">
				<li><a href="https://twitter.com/carvel_dev"><img src="/img/twitter.png" />Twitter</a></li>
				<li><a href="https://github.com/vmware-tanzu/carvel.dev"><img src="/img/github.svg" />Github</a></li>
				<li><a href="https://kubernetes.slack.com/archives/CH8KCCKA5">
					<img src="/img/slack.png" />
					<span class="desktop">#carvel in Kubernetes Slack</span>
					<span class="mobile">Slack</span>
				</a></li>
			</ul>
			<div class="right-links">
				<a href="/"> <img src="/img/logo.svg" /></a>
			</div>
		</div>
		<div class="bottom-links">
			<p class="copywrite">&copy; 2021 Carvel Authors. <a href="http://vmware.github.io/">A VMware-backed project. <img src="/img/vm-logo.svg" /></a></p>
		</div>
	</div>
</footer>

    
    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
      <script type="text/javascript">
        docsearch({
          apiKey: '582b1408d7a3fe145c0f84f48ca03755',
          indexName: 'carvel',
          inputSelector: '.docsearch-input',
          algoliaOptions: {'facetFilters': ["tags:kapp-controller"], hitsPerPage: 9},
          debug: false 
        });
      </script>
    
  </body>
</html>
